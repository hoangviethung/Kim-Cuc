{"version":3,"sources":["map.js"],"names":["mapSelector","querySelector","infoWindow","document","dealerLocatorList","markers","zoom","addMarkers","bounds","google","maps","LatLngBounds","locations","forEach","location","index","locationLatLng","LatLng","lat","lng","marker","Marker","map","title","position","push","fitBounds","showInfoMarkerOnMap","event","addListener","address","phone","lastItemClickedIndex","getPosition","close","getLocationList","newMarker","createElement","classList","add","addEventListener","markerIndex","setAttribute","concat","appendChild","getAttribute","trigger","initialize","listener","getZoom","setZoom","InfoWindow","Map","mapOption","removeListener","addDomListener","window"],"mappings":"aAAA,IAAIA,IAAAA,qBAAuBC,UAAcC,WAArCF,YAAcG,SAASF,cAAc,QACrCG,kBAAoBD,SAASF,cAAc,8BAD/CI,QAAA,GACID,UAAAA,CACJE,KAAA,IAuKCC,WAAA,WACAF,QAAA,GACA,IAAAG,EAAA,IAAAC,OAAAC,KAAAC,aAMAC,UAAUC,QAAQ,SAACC,EAAUC,GA9K9B,IAAAC,EAAA,IAAAP,OAAAC,KAAAO,OAAAH,EAAAI,IAAAJ,EAAAK,KAgLMC,EAAS,IAAIX,OAAOC,KAAKW,OAAO,CALtCC,IAAMf,IACLF,MAAOS,EAAPS,MACAC,SAAYR,EACZJ,KAAAA,EAAUC,OAETL,EAAIY,OAAMA,EAAOX,UAChBa,QAAGG,KADgCL,GAEnCG,oBAAgBA,EAFmBR,KAAAO,IAAvBI,UAAblB,IAQAmB,oBAAoBP,SAAAA,EAADL,GACnBN,OAXDC,KAAAkB,MAAAC,YAAAT,EAAA,QAAA,WAaAE,WAAII,WAAJJ,iBAAAA,OAhBDV,UAAAG,GAAAQ,MAgBCD,sBAAAA,OAOQV,UAAUG,GAAOe,QAPzBR,qBAAAA,OAGKK,UAAAA,GAAsBI,MAH3BT,iBAKCpB,qBAAAa,EAKAiB,WAAAA,KAAAA,IAAAA,GACA9B,IAAAA,MAAAA,EAAA+B,eACAX,IAAAA,QAAUF,MAEVX,OAVDC,KAAAkB,MAAAC,YAAAP,IAAA,QAAA,WAWAb,WAAAyB,WAKKC,gBAAkB,WAAlBA,oBAsBJ/B,kBAAAA,UAAA,GACAC,QAAAA,QAAQQ,SAARO,EAAgBL,GACf,IAAAqB,EAAejC,SAAWkC,cAAR,OAClBD,EAAAA,UAAUE,IAAUC,uBACpBH,EAAAA,UAAAA,iBAAAA,OAOAA,UAAUI,GAAAA,MAPVJ,sBAAAA,OAQCJ,UAAAA,GAAAA,QARDI,qBAAAA,OASCxB,UAAM6B,GAAcL,MATrBA,gBAWCA,EAJDM,aAAA,YAIC,GAAAC,OAJD5B,IAKAX,EAAAA,iBAAkBwC,QAAYR,WAC9BJ,qBAhBDjB,EAiBA,IAAA0B,EAAAL,EAAAS,aAAA,aAxCFpC,OAAAC,KAAAkB,MAAAkB,QAAAzC,QAAAoC,GAAA,WA2CArC,kBAAmBwC,YAAbG,OAKDC,WAAWvC,WACdG,UAAQqC,eACP3B,WAAI4B,IAAQzC,OAAZC,KAAAyC,WACA7B,IAAA,IAAAb,OAAAC,KAAA0C,IAAApD,YAAAqD,WAJF9C,aAKCE,IAAAA,EAAYmB,OAAM0B,KAAAA,MAAAA,YAAlBhC,IAAA,OAAA,WAJD,GAAAA,IAAA2B,WAMAxC,IAAAA,QAAYmB,IAFXnB,OAAOC,KAAKkB,MAAM0B,eAAeN,KAMlCvC,OAAMC,KAANkB,MAAAC,YAAkB0B,IAAeC,iBAAgBT,kBAEhDZ,cACA1B,OAAAC,KAAAkB,MAAA2B,eAAAC,OAAA,OAAAT,YACD3C,mBAFC+B","file":"map.min.js","sourcesContent":["let mapSelector = document.querySelector('#map');\r\nlet dealerLocatorList = document.querySelector('.dealer-locator-list .list');\r\nlet map, lastItemClickedIndex, locations, infoWindow, markers = [];\r\nlet mapOption = {\r\n\tzoom: 16,\r\n\t// styles: [\r\n\t// \t{\r\n\t// \t\t\"featureType\": \"all\",\r\n\t// \t\t\"elementType\": \"labels.text.fill\",\r\n\t// \t\t\"stylers\": [\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"saturation\": 36\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"color\": \"#000000\"\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"lightness\": 40\r\n\t// \t\t\t}\r\n\t// \t\t]\r\n\t// \t},\r\n\t// \t{\r\n\t// \t\t\"featureType\": \"all\",\r\n\t// \t\t\"elementType\": \"labels.text.stroke\",\r\n\t// \t\t\"stylers\": [\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"visibility\": \"on\"\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"color\": \"#000000\"\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"lightness\": 16\r\n\t// \t\t\t}\r\n\t// \t\t]\r\n\t// \t},\r\n\t// \t{\r\n\t// \t\t\"featureType\": \"all\",\r\n\t// \t\t\"elementType\": \"labels.icon\",\r\n\t// \t\t\"stylers\": [\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"visibility\": \"off\"\r\n\t// \t\t\t}\r\n\t// \t\t]\r\n\t// \t},\r\n\t// \t{\r\n\t// \t\t\"featureType\": \"administrative\",\r\n\t// \t\t\"elementType\": \"geometry.fill\",\r\n\t// \t\t\"stylers\": [\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"color\": \"#000000\"\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"lightness\": 20\r\n\t// \t\t\t}\r\n\t// \t\t]\r\n\t// \t},\r\n\t// \t{\r\n\t// \t\t\"featureType\": \"administrative\",\r\n\t// \t\t\"elementType\": \"geometry.stroke\",\r\n\t// \t\t\"stylers\": [\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"color\": \"#000000\"\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"lightness\": 17\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"weight\": 1.2\r\n\t// \t\t\t}\r\n\t// \t\t]\r\n\t// \t},\r\n\t// \t{\r\n\t// \t\t\"featureType\": \"landscape\",\r\n\t// \t\t\"elementType\": \"geometry\",\r\n\t// \t\t\"stylers\": [\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"color\": \"#000000\"\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"lightness\": 20\r\n\t// \t\t\t}\r\n\t// \t\t]\r\n\t// \t},\r\n\t// \t{\r\n\t// \t\t\"featureType\": \"poi\",\r\n\t// \t\t\"elementType\": \"geometry\",\r\n\t// \t\t\"stylers\": [\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"color\": \"#000000\"\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"lightness\": 21\r\n\t// \t\t\t}\r\n\t// \t\t]\r\n\t// \t},\r\n\t// \t{\r\n\t// \t\t\"featureType\": \"road.highway\",\r\n\t// \t\t\"elementType\": \"geometry.fill\",\r\n\t// \t\t\"stylers\": [\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"color\": \"#000000\"\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"lightness\": 17\r\n\t// \t\t\t}\r\n\t// \t\t]\r\n\t// \t},\r\n\t// \t{\r\n\t// \t\t\"featureType\": \"road.highway\",\r\n\t// \t\t\"elementType\": \"geometry.stroke\",\r\n\t// \t\t\"stylers\": [\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"color\": \"#000000\"\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"lightness\": 29\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"weight\": 0.2\r\n\t// \t\t\t}\r\n\t// \t\t]\r\n\t// \t},\r\n\t// \t{\r\n\t// \t\t\"featureType\": \"road.arterial\",\r\n\t// \t\t\"elementType\": \"geometry\",\r\n\t// \t\t\"stylers\": [\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"color\": \"#000000\"\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"lightness\": 18\r\n\t// \t\t\t}\r\n\t// \t\t]\r\n\t// \t},\r\n\t// \t{\r\n\t// \t\t\"featureType\": \"road.local\",\r\n\t// \t\t\"elementType\": \"geometry\",\r\n\t// \t\t\"stylers\": [\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"color\": \"#000000\"\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"lightness\": 16\r\n\t// \t\t\t}\r\n\t// \t\t]\r\n\t// \t},\r\n\t// \t{\r\n\t// \t\t\"featureType\": \"transit\",\r\n\t// \t\t\"elementType\": \"geometry\",\r\n\t// \t\t\"stylers\": [\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"color\": \"#000000\"\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"lightness\": 19\r\n\t// \t\t\t}\r\n\t// \t\t]\r\n\t// \t},\r\n\t// \t{\r\n\t// \t\t\"featureType\": \"water\",\r\n\t// \t\t\"elementType\": \"geometry\",\r\n\t// \t\t\"stylers\": [\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"color\": \"#952d2d\"\r\n\t// \t\t\t},\r\n\t// \t\t\t{\r\n\t// \t\t\t\t\"lightness\": 17\r\n\t// \t\t\t}\r\n\t// \t\t]\r\n\t// \t}\r\n\t// ]\r\n};\r\n\r\nconst addMarkers = () => {\r\n\tmarkers = [];\r\n\tconst bounds = new google.maps.LatLngBounds();\r\n\tlocations.forEach((location, index) => {\r\n\t\tlet locationLatLng = new google.maps.LatLng(location.lat, location.lng);\r\n\t\tlet marker = new google.maps.Marker({\r\n\t\t\tmap: map,\r\n\t\t\ttitle: location.title,\r\n\t\t\tposition: locationLatLng,\r\n\t\t\ticon: location.icon,\r\n\t\t});\r\n\t\tbounds.extend(marker.position);\r\n\t\tmarkers.push(marker);\r\n\t\tshowInfoMarkerOnMap(marker, index);\r\n\t});\r\n\r\n\tmap.fitBounds(bounds);\r\n};\r\n\r\nconst showInfoMarkerOnMap = (marker, index) => {\r\n\tgoogle.maps.event.addListener(marker, 'click', function() {\r\n\t\tinfoWindow.setContent(`\r\n\t\t\t\t<h3>${locations[index].title}</h3>\r\n\t\t\t\t<p>${locations[index].address}</p>\r\n\t\t\t\t<p>${locations[index].phone}</p>\r\n\t\t\t`);\r\n\t\tlastItemClickedIndex = index;\r\n\t\tinfoWindow.open(map, marker);\r\n\t\tmap.panTo(marker.getPosition());\r\n\t\tmap.setZoom(12);\r\n\t})\r\n\tgoogle.maps.event.addListener(map, 'click', function() {\r\n\t\tinfoWindow.close();\r\n\t})\r\n};\r\n\r\nconst getLocationList = () => {\r\n\tif (dealerLocatorList) {\r\n\t\t// dealerLocatorList.innerHTML = '';\r\n\t\t// markers.forEach((marker, index) => {\r\n\t\t// \tif (map.getBounds().contains(marker.getPosition())) {\r\n\t\t// \t\tconst newMarker = document.createElement('div');\r\n\t\t// \t\tnewMarker.classList.add('dealer-locator-item');\r\n\t\t// \t\tnewMarker.innerHTML = `\r\n\t\t// \t\t\t\t<h3>${locations[index].title}</h3>\r\n\t\t// \t\t\t\t<p>${locations[index].address}</p>\r\n\t\t// \t\t\t\t<p>${locations[index].phone}</p>\r\n\t\t// \t\t\t`;\r\n\t\t// \t\tnewMarker.setAttribute('marker-id', `${index}`);\r\n\t\t// \t\tnewMarker.addEventListener('click', () => {\r\n\t\t// \t\t\tlastItemClickedIndex = index;\r\n\t\t// \t\t\tconst markerIndex = newMarker.getAttribute('marker-id');\r\n\t\t// \t\t\tgoogle.maps.event.trigger(markers[markerIndex], 'click');\r\n\t\t// \t\t});\r\n\t\t// \t\tdealerLocatorList.appendChild(newMarker);\r\n\t\t// \t}\r\n\t\t// });\r\n\r\n\t\tdealerLocatorList.innerHTML = '';\r\n\t\tmarkers.forEach((marker, index) => {\r\n\t\t\tconst newMarker = document.createElement('div');\r\n\t\t\tnewMarker.classList.add('dealer-locator-item');\r\n\t\t\tnewMarker.innerHTML =\r\n\t\t\t\t`\r\n\t\t\t\t<h3>${locations[index].title}</h3>\r\n\t\t\t\t<p>${locations[index].address}</p>\r\n\t\t\t\t<p>${locations[index].phone}</p>\r\n\t\t\t`;\r\n\t\t\tnewMarker.setAttribute('marker-id', `${index}`);\r\n\t\t\tnewMarker.addEventListener('click', () => {\r\n\t\t\t\tlastItemClickedIndex = index;\r\n\t\t\t\tconst markerIndex = newMarker.getAttribute('marker-id');\r\n\t\t\t\tgoogle.maps.event.trigger(markers[markerIndex], 'click');\r\n\t\t\t});\r\n\t\t\tdealerLocatorList.appendChild(newMarker);\r\n\t\t})\r\n\t}\r\n};\r\n\r\nconst initialize = () => {\r\n\tlocations = locationsInput;\r\n\tinfoWindow = new google.maps.InfoWindow();\r\n\tmap = new google.maps.Map(mapSelector, mapOption);\r\n\taddMarkers();\r\n\tlet listener = google.maps.event.addListener(map, 'idle', () => {\r\n\t\tif (map.getZoom() > 16) {\r\n\t\t\tmap.setZoom(16);\r\n\t\t}\r\n\t\tgoogle.maps.event.removeListener(listener);\r\n\t});\r\n\tgoogle.maps.event.addListener(map, 'bounds_changed', getLocationList);\r\n};\r\n\r\nif (mapSelector) {\r\n\tgoogle.maps.event.addDomListener(window, 'load', initialize);\r\n\tif (dealerLocatorList) {\r\n\t\tgetLocationList();\r\n\t}\r\n}"]}